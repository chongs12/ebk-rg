apiVersion: v1
kind: Service
metadata:
  name: ekb-rabbitmq
  namespace: ekb
spec:
  selector:
    app: rabbitmq
  ports:
    - protocol: TCP
      port: 5672
      targetPort: 5672
      name: amqp
    - protocol: TCP
      port: 15672
      targetPort: 15672
      name: management
---
apiVersion: v1
kind: Service
metadata:
  name: ekb-auth
  namespace: ekb
spec:
  selector:
    app: ekb-auth
  ports:
    - protocol: TCP
      port: 8081
      targetPort: 8081
---
apiVersion: v1
kind: Service
metadata:
  name: ekb-document
  namespace: ekb
spec:
  selector:
    app: ekb-document
  ports:
    - protocol: TCP
      port: 8082
      targetPort: 8082
---
apiVersion: v1
kind: Service
metadata:
  name: ekb-vector
  namespace: ekb
spec:
  selector:
    app: ekb-vector
  ports:
    - protocol: TCP
      port: 8083
      targetPort: 8083
      name: http
    - protocol: TCP
      port: 50053
      targetPort: 50053
      name: grpc
---
apiVersion: v1
kind: Service
metadata:
  name: ekb-query
  namespace: ekb
spec:
  selector:
    app: ekb-query
  ports:
    - protocol: TCP
      port: 8084
      targetPort: 8084
---
apiVersion: v1
kind: Service
metadata:
  name: ekb-gateway
  namespace: ekb
spec:
  selector:
    app: ekb-gateway
  type: NodePort
  ports:
    - protocol: TCP
      port: 8080
      targetPort: 8080
      nodePort: 30080
